source: MYSQL_SOURCE
target: POSTGRES_TARGET

defaults:
  mode: full-refresh
  object: "{stream_schema}.{stream_table}"

streams:
  public.users:
    mode: incremental
    primary_key: [id]
    update_key: updated_at
    sql: |
      SELECT
        id,
        username,
        email,
        created_at,
        updated_at,
        is_active
      FROM users
      WHERE updated_at > '{incremental_value}'

  public.orders:
    mode: incremental
    primary_key: [id]
    update_key: order_date
    sql: |
      SELECT
        id,
        user_id,
        order_date,
        total_amount,
        status,
        created_at
      FROM orders
      WHERE order_date > '{incremental_value}'

  public.products:
    mode: full-refresh
    sql: |
      SELECT
        id,
        name,
        description,
        price,
        category,
        in_stock
      FROM products
